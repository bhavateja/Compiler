MOV R0,SP
ADD R0,-5
MOV R0,[R0]
MOV R1,"Read"
EQ R1,R0
JNZ R1,42
MOV R1,"Write"
EQ R1,R0
JNZ R1,86
MOV R1,"Exit"
EQ R1,R0
JNZ R1,130
MOV R1,"Heapset"
EQ R1,R0
JNZ R1,174
MOV R1,"Alloc"
EQ R1,R0
JNZ R1,204
MOV R1,"Free"
EQ R1,R0
JNZ R1,226
MOV R0,SP       
ADD R0,-4
MOV R2,[R0]
ADD R0,1
MOV R3,[R0]
ADD R0,1
MOV R4,[R0]
MOV R1,7
PUSH R1
PUSH R2
PUSH R3
PUSH R4
PUSH R1
INT 6
POP R2
POP R1
POP R1
POP R1
POP R1
ADD R0,1
MOV [R0],R2
RET
MOV R0,SP     
ADD R0,-4
MOV R2,[R0]
ADD R0,1
MOV R3,[R0]
ADD R0,1
MOV R4,[R0]
MOV R1,5
PUSH R1
PUSH R2
PUSH R3
PUSH R4
PUSH R1
INT 7
POP R2
POP R1
POP R1
POP R1
POP R1
ADD R0,1
MOV [R0],R2
RET
MOV R0,SP   
ADD R0,-4
MOV R2,[R0]
ADD R0,1
MOV R3,[R0]
ADD R0,1
MOV R4,[R0]
MOV R1,10
PUSH R1
PUSH R2
PUSH R3
PUSH R4
PUSH R1
INT 10
POP R2
POP R1
POP R1
POP R1
POP R1
ADD R0,1
MOV [R0],R2
RET
MOV R0,1024  
MOV R1,1032  
MOV R2,2040     
EQ R2,R0    
JNZ R2,192
MOV [R0],R1
ADD R0,8
ADD R1,8
JMP 178
MOV R1,-1
MOV [R0],R1      
MOV R0,SP   
ADD R0,-1
MOV [R0],0     
RET
MOV R0,1024 
MOV R1,[R0]
MOV R2,-1        
EQ R2,R1
JNZ R2,218
MOV R2,[R1]    
MOV [R0],R2
MOV R0,SP
ADD R0,-1
MOV [R0],R1    
RET
MOV R0,SP  
ADD R0,-4
MOV R1,[R0]
MOV R2,2047    
LT R2,R1
JNZ R2,250
MOV R2,1024    
MOV R3,[R2]    
MOV [R1],R3
MOV [R2],R1    
MOV R0,0
JMP 252
MOV R0,-1
MOV R1,SP
ADD R1,-1
MOV [R1],R0
RET